{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\admin\\controller\\auth.js"
    ],
    "names": [
        "Base",
        "require",
        "module",
        "exports",
        "loginAction",
        "username",
        "post",
        "password",
        "admin",
        "model",
        "where",
        "find",
        "think",
        "isEmpty",
        "fail",
        "md5",
        "TokenSerivce",
        "service",
        "sessionKey",
        "create",
        "id",
        "userInfo",
        "success",
        "token"
    ],
    "mappings": ";;AAAA,MAAMA,OAAOC,QAAQ,WAAR,CAAb;AACAC,OAAOC,OAAP,GAAiB,cAAcH,IAAd,CAAmB;AAC1BI,eAAN,GAAoB;AAAA;;AAAA;AAChB,kBAAMC,WAAW,MAAKC,IAAL,CAAU,UAAV,CAAjB;AACA,kBAAMC,WAAW,MAAKD,IAAL,CAAU,UAAV,CAAjB;AACA,kBAAME,QAAQ,MAAM,MAAKC,KAAL,CAAW,OAAX,EAAoBC,KAApB,CAA0B;AAC1CL,0BAAUA;AADgC,aAA1B,EAEjBM,IAFiB,EAApB;AAGA,gBAAIC,MAAMC,OAAN,CAAcL,KAAd,CAAJ,EAA0B;AACtB,uBAAO,MAAKM,IAAL,CAAU,GAAV,EAAe,YAAf,CAAP;AACH;AACD,gBAAIF,MAAMG,GAAN,CAAUR,QAAV,MAAwBC,MAAMD,QAAlC,EAA4C;AACxC,uBAAO,MAAKO,IAAL,CAAU,GAAV,EAAe,aAAf,CAAP;AACH;AACD,kBAAME,eAAe,MAAKC,OAAL,CAAa,OAAb,EAAsB,OAAtB,CAArB;AACA,kBAAMC,aAAa,MAAMF,aAAaG,MAAb,CAAoB;AACzCC,oBAAIZ,MAAMY;AAD+B,aAApB,CAAzB;AAGA,gBAAIR,MAAMC,OAAN,CAAcK,UAAd,CAAJ,EAA+B;AAC3B,uBAAO,MAAKJ,IAAL,CAAU,MAAV,CAAP;AACH;AACD,kBAAMO,WAAW;AACbD,oBAAIZ,MAAMY,EADG;AAEbf,0BAAUG,MAAMH;AAFH,aAAjB;AAIA,mBAAO,MAAKiB,OAAL,CAAa;AAChBC,uBAAOL,UADS;AAEhBG,0BAAUA;AAFM,aAAb,CAAP;AAvBgB;AA2BnB;AA5B+B,CAApC",
    "file": "..\\..\\..\\src\\admin\\controller\\auth.js",
    "sourcesContent": [
        "const Base = require('./base.js');\r\nmodule.exports = class extends Base {\r\n    async loginAction() {\r\n        const username = this.post('username');\r\n        const password = this.post('password');\r\n        const admin = await this.model('admin').where({\r\n            username: username\r\n        }).find();\r\n        if (think.isEmpty(admin)) {\r\n            return this.fail(401, '用户名或密码不正确!');\r\n        }\r\n        if (think.md5(password) !== admin.password) {\r\n            return this.fail(400, '用户名或密码不正确!!');\r\n        }\r\n        const TokenSerivce = this.service('token', 'admin');\r\n        const sessionKey = await TokenSerivce.create({\r\n            id: admin.id\r\n        });\r\n        if (think.isEmpty(sessionKey)) {\r\n            return this.fail('登录失败');\r\n        }\r\n        const userInfo = {\r\n            id: admin.id,\r\n            username: admin.username,\r\n        };\r\n        return this.success({\r\n            token: sessionKey,\r\n            userInfo: userInfo\r\n        });\r\n    }\r\n};\r\n"
    ]
}